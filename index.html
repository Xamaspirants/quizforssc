
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Quiz Interface</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            background-color: #f4f6f9;
            font-family: Arial, sans-serif;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin-top: 20px;
        }
        .question-card, .timer-bar {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Timer Styles */
        .timer-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
        }
        
        /* Question Section */
        .question-card h5 {
            font-size: 20px;
            font-weight: 600;
        }
        
        .options button {
            background-color: #e9ecef;
            font-weight: 500;
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: none;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }
        .options button:hover {
            background-color: #dfe4ea;
        }
        .options button.selected {
            background-color: #28a745;
            color: white;
        }

        /* Sidebar (Question Navigation) */
        .sidebar {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            max-width: 400px;
            height: 100%;
            background-color: #f8f9fa;
            transition: right 0.4s ease;
            box-shadow: -3px 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 1000;
        }
        .sidebar.open {
            right: 0;
        }

        .sidebar-header {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .sidebar .question-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        .sidebar .question-grid button {
            font-weight: bold;
            border-radius: 5px;
            padding: 10px;
            transition: background-color 0.3s;
            cursor: pointer;
        }
        .status-unattempted {
            background-color: #6c757d;
            color: #fff;
        }
        .status-marked {
            background-color: #ffc107;
            color: #fff;
        }
        .status-attempted {
            background-color: #28a745;
            color: #fff;
        }
        .status-unattempted-red {
            background-color: #dc3545; /* Red for unattempted questions */
            color: #fff;
        }

        /* Toggle Button */
        .toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 50px;
            font-size: 20px;
            cursor: pointer;
            z-index: 1100;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }
        .toggle-btn:hover {
            background-color: #0056b3;
        }

        /* Results Modal Styles */
        .correct-answer {
            color: green;
            font-weight: bold;
        }
        .wrong-answer {
            color: red;
            font-weight: bold;
        }

        /* Responsive adjustments */
        @media (max-width: 767px) {
            .container {
                padding: 0 15px;
            }
            .sidebar {
                width: 100%;
            }
        }
        
        /* Ensure toggle button is hidden in desktop mode */
@media (min-width: 1024px) { /* Adjust breakpoint as needed */
    .toggle-btn, #toggle-button, .sidebar-toggle, .cross { /* Add more specific selectors if needed */
        display: none !important; /* Use !important to override other styles */
    }

    /* Sidebar fixed to the right */
    .sidebar {
        width: 250px; /* Adjust as needed */
        position: fixed;
        top: 0;
        right: 0;
        height: 100vh;
        overflow-y: auto;
    }

    /* Main content margin adjustment for fixed sidebar */
    .main-content {
        margin-right: 260px; /* Adjust based on sidebar width */
        padding: 20px; /* Optional padding */
    }
}
        
        
    </style>
</head>
<body>

<div class="container">
    <!-- Timer Bar -->
    <div class="timer-bar d-flex justify-content-between">
        <span>Time Left: <span id="timer">1:00</span></span>
    </div>

    <!-- Quiz Section -->
    <div id="quiz-section">
        <div class="question-card">
            <h5 id="question">Loading question...</h5>
            <div class="options" id="options"></div>
        </div>

        <!-- Navigation Buttons -->
        <div class="d-flex justify-content-between">
            <button class="btn btn-warning" id="mark-review">Mark for Review</button>
            <button class="btn btn-secondary" id="clear-answer">Clear</button>
            <button class="btn btn-primary" id="next-question">Save & Next</button>
        </div>
    </div>
</div>

<!-- Toggle Button for Sidebar -->
<button class="toggle-btn" onclick="toggleSidebar()">☰</button>

<!-- Sidebar Navigation Panel -->
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <span>Question Navigator</span>
        <button class="cross" onclick="toggleSidebar()">✕</button>
    </div>
    <div class="question-grid" id="question-grid"></div>
    <button class="btn btn-primary w-100 mt-3" onclick="submitTest()">Submit Test</button>
</div>

<!-- Results Modal -->
<div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="resultsModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="resultsModalLabel">Quiz Results</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="results">
                <!-- Results will be populated here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="restartQuiz()">Take Quiz Again</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    // Sample Questions Data
    const questions = [
        { text: "What is the capital of France?", options: ["Paris", "Rome", "Madrid", "Berlin"], answer: 0 },
        { text: "Which planet is known as the Red Planet?", options: ["Earth", "Venus", "Mars", "Jupiter"], answer: 2 },
        { text: "What is the largest mammal in the world?", options: ["Elephant", "Blue Whale", "Great White Shark", "Giraffe"], answer: 1 },
        { text: "Which element has the chemical symbol 'O'?", options: ["Gold", "Oxygen", "Osmium", "Oganesson"], answer: 1 },
        { text: "What year did the Titanic sink?", options: ["1912", "1914", "1905", "1900"], answer: 0 },
        { text: "What is the smallest prime number?", options: ["0", "1", "2", "3"], answer: 2 },
        { text: "Who wrote 'Romeo and Juliet'?", options: ["Charles Dickens", "William Shakespeare", "Mark Twain", "Leo Tolstoy"], answer: 1 },
        { text: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Endoplasmic Reticulum"], answer: 1 },
        { text: "Which continent is known as the 'Dark Continent'?", options: ["Asia", "Africa", "Australia", "South America"], answer: 1 },
        { text: "What is the boiling point of water?", options: ["100°C", "90°C", "80°C", "120°C"], answer: 0 }
    ];

    let currentQuestionIndex = 0;
    let selectedOptionIndex = -1; // To track the selected option
    const markedForReview = new Set(); // To track questions marked for review
    const attemptedQuestions = new Set(); // To track attempted questions
    const selectedAnswers = new Array(questions.length).fill(null); // Store selected answers
    let timer; // Timer variable

    function loadQuestion(index) {
        const question = questions[index];
        document.getElementById('question').textContent = question.text;
        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';

        question.options.forEach((option, i) => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option;

            // Highlight the button if it was previously selected
            if (selectedAnswers[index] === i) {
                button.classList.add('selected');
            }

            button.onclick = () => selectOption(i);
            optionsContainer.appendChild(button);
        });
    }

    function selectOption(optionIndex) {
        clearSelectedAnswer();
        const optionButtons = document.querySelectorAll('.option-btn');
        optionButtons[optionIndex].classList.add('selected');
        selectedOptionIndex = optionIndex; // Store the selected option index
        attemptedQuestions.add(currentQuestionIndex); // Mark this question as attempted
        selectedAnswers[currentQuestionIndex] = optionIndex; // Store the selected answer
        updateGridStatus(currentQuestionIndex, 'status-attempted');
    }

    function markForReview() {
        if (!markedForReview.has(currentQuestionIndex)) {
            markedForReview.add(currentQuestionIndex);
            updateGridStatus(currentQuestionIndex, 'status-marked');
        }
        nextQuestion(); // Move to the next question
    }

    function clearSelectedAnswer() {
        const selectedButtons = document.querySelectorAll('.option-btn.selected');
        selectedButtons.forEach(button => {
            button.classList.remove('selected');
        });
    }

    function updateGridStatus(index, statusClass) {
        const btn = document.getElementById(`q${index}`);
        btn.className = statusClass;
    }

    function setupGrid() {
        const questionGrid = document.getElementById('question-grid');
        questionGrid.innerHTML = '';
        questions.forEach((_, index) => {
            const btn = document.createElement('button');
            btn.id = `q${index}`;
            btn.textContent = index + 1;

            // Determine the class based on the question state
            if (markedForReview.has(index)) {
                btn.className = 'status-marked';
            } else if (attemptedQuestions.has(index)) {
                btn.className = 'status-attempted';
            } else {
                btn.className = 'status-unattempted';
            }

            btn.onclick = () => {
                currentQuestionIndex = index;
                loadQuestion(index);
                toggleSidebar();
            };
            questionGrid.appendChild(btn);
        });
    }

    function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("open");
    }

    // Timer function (simple countdown)
    let timeRemaining = 1 * 60;

    function startTimer() {
        timer = setInterval(() => {
            if (timeRemaining > 0) {
                timeRemaining--;
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            } else {
                clearInterval(timer);
                submitTest(); // Automatically submit when time is up
            }
        }, 1000);
    }

    function nextQuestion() {
        // If no answer was selected, mark the question as unattempted in red
        if (selectedOptionIndex === -1) {
            updateGridStatus(currentQuestionIndex, 'status-unattempted-red');
        }
        
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            loadQuestion(currentQuestionIndex);
        }
        // Reset selectedOptionIndex for next question
        selectedOptionIndex = -1;
    }

    function submitTest() {
        // Stop the timer
        clearInterval(timer);

        // Calculate score and gather results
        let score = 0;
        const totalQuestions = questions.length;
        const unansweredQuestions = totalQuestions - attemptedQuestions.size - markedForReview.size;
        const wrongAnswersList = [];

        questions.forEach((question, index) => {
            if (markedForReview.has(index)) {
                return; // Skip marked questions
            }

            if (attemptedQuestions.has(index)) {
                if (selectedAnswers[index] !== question.answer) {
                    wrongAnswersList.push({
                        question: question.text,
                        selectedAnswer: question.options[selectedAnswers[index]],
                        correctAnswer: question.options[question.answer]
                    });
                    // Apply negative marking for incorrect answers
                    score -= 0.5;
                } else {
                    score += 2; // Each correct answer is worth 2 points
                }
            }
        });

        // Show results in the modal
        displayResults(score, totalQuestions, unansweredQuestions, wrongAnswersList);
    }

    function displayResults(score, totalQuestions, unansweredQuestions, wrongAnswersList) {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = `
            <h3>Your Score: ${score.toFixed(1)} out of ${totalQuestions * 2}</h3>
            <p>Unanswered Questions: ${unansweredQuestions}</p>
            <p>Marked for Review: ${markedForReview.size}</p>
            <p>Wrong Answers: ${wrongAnswersList.length}</p>
            <ul>
                ${wrongAnswersList.map(answer => `
                    <li>${answer.question} 
                    <br>Your Answer: <span class="wrong-answer">${answer.selectedAnswer}</span> 
                    <br>Correct Answer: <span class="correct-answer">${answer.correctAnswer}</span>
                    </li>`).join('')}
            </ul>
        `;
        $('#resultsModal').modal('show'); // Show the modal with the results
    }

    function restartQuiz() {
        // Reset the quiz state and reload the first question
        currentQuestionIndex = 0;
        selectedOptionIndex = -1;
        markedForReview.clear();
        attemptedQuestions.clear();
        selectedAnswers.fill(null); // Clear selected answers

        // Reset timer
        timeRemaining = 12 * 60;
        document.getElementById('timer').textContent = "12:00"; // Reset timer display
        startTimer(); // Start the timer

        setupGrid();
        loadQuestion(currentQuestionIndex);
    }

    // Initialize
    setupGrid();
    loadQuestion(currentQuestionIndex);
    startTimer(); // Start the timer when the quiz begins

    // Add event listener for the buttons
    document.getElementById('mark-review').onclick = markForReview;
    document.getElementById('clear-answer').onclick = clearSelectedAnswer;
    document.getElementById('next-question').onclick = nextQuestion;
</script>

</body>
</html>


